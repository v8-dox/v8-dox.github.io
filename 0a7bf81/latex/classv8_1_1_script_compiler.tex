\hypertarget{classv8_1_1_script_compiler}{}\section{v8\+:\+:Script\+Compiler Class Reference}
\label{classv8_1_1_script_compiler}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}


{\ttfamily \#include $<$v8.\+h$>$}

\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structv8_1_1_script_compiler_1_1_cached_data}{Cached\+Data}
\item 
class \hyperlink{classv8_1_1_script_compiler_1_1_external_source_stream}{External\+Source\+Stream}
\item 
class \hyperlink{classv8_1_1_script_compiler_1_1_script_streaming_task}{Script\+Streaming\+Task}
\item 
class \hyperlink{classv8_1_1_script_compiler_1_1_source}{Source}
\item 
class \hyperlink{classv8_1_1_script_compiler_1_1_streamed_source}{Streamed\+Source}
\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classv8_1_1_script_compiler_aa6db7774ab5d8793cd88db6b35a71818}{}enum {\bfseries Compile\+Options} \{ \\*
{\bfseries k\+No\+Compile\+Options} = 0, 
{\bfseries k\+Produce\+Parser\+Cache}, 
{\bfseries k\+Consume\+Parser\+Cache}, 
{\bfseries k\+Produce\+Code\+Cache}, 
\\*
{\bfseries k\+Consume\+Code\+Cache}, 
{\bfseries k\+Produce\+Data\+To\+Cache}
 \}\label{classv8_1_1_script_compiler_aa6db7774ab5d8793cd88db6b35a71818}

\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_unbound_script}{Unbound\+Script} $>$ \hyperlink{classv8_1_1_script_compiler_a5f590f94e2705d12392c17b7fa097e1d}{Compile\+Unbound} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_source}{Source} $\ast$source, Compile\+Options options=k\+No\+Compile\+Options)
\item 
static \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_script}{Script} $>$ \hyperlink{classv8_1_1_script_compiler_a4cef8b34c2744f6508a9ce53182c19bf}{Compile} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_source}{Source} $\ast$source, Compile\+Options options=k\+No\+Compile\+Options)
\item 
static \hyperlink{classv8_1_1_script_compiler_1_1_script_streaming_task}{Script\+Streaming\+Task} $\ast$ \hyperlink{classv8_1_1_script_compiler_a406bb44ef02d644d94bccd3f7b04f2d4}{Start\+Streaming\+Script} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_streamed_source}{Streamed\+Source} $\ast$source, Compile\+Options options=k\+No\+Compile\+Options)
\item 
static \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_script}{Script} $>$ \hyperlink{classv8_1_1_script_compiler_a45b17bbe1da31c32e3783b91bdde9fcb}{Compile} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_streamed_source}{Streamed\+Source} $\ast$source, \hyperlink{classv8_1_1_handle}{Handle}$<$ \hyperlink{classv8_1_1_string}{String} $>$ full\+\_\+source\+\_\+string, const \hyperlink{classv8_1_1_script_origin}{Script\+Origin} \&origin)
\item 
static uint32\+\_\+t \hyperlink{classv8_1_1_script_compiler_aea78877b0dccde1e587ee1ddeda1c155}{Cached\+Data\+Version\+Tag} ()
\item 
static \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_script}{Script} $>$ \hyperlink{classv8_1_1_script_compiler_a96bafa715e4a9c413824f2ce6c7db434}{Compile\+Module} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_source}{Source} $\ast$source, Compile\+Options options=k\+No\+Compile\+Options)
\item 
static \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_function}{Function} $>$ \hyperlink{classv8_1_1_script_compiler_a0811ba4ae8b6700d44d0d082a4812794}{Compile\+Function\+In\+Context} (\hyperlink{classv8_1_1_isolate}{Isolate} $\ast$isolate, \hyperlink{classv8_1_1_script_compiler_1_1_source}{Source} $\ast$source, \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_context}{Context} $>$ context, size\+\_\+t arguments\+\_\+count, \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_string}{String} $>$ arguments\mbox{[}$\,$\mbox{]}, size\+\_\+t context\+\_\+extension\+\_\+count, \hyperlink{classv8_1_1_local}{Local}$<$ \hyperlink{classv8_1_1_object}{Object} $>$ context\+\_\+extensions\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
For compiling scripts. 

\subsection{Member Function Documentation}
\hypertarget{classv8_1_1_script_compiler_aea78877b0dccde1e587ee1ddeda1c155}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Cached\+Data\+Version\+Tag@{Cached\+Data\+Version\+Tag}}
\index{Cached\+Data\+Version\+Tag@{Cached\+Data\+Version\+Tag}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Cached\+Data\+Version\+Tag}]{\setlength{\rightskip}{0pt plus 5cm}static uint32\+\_\+t v8\+::\+Script\+Compiler\+::\+Cached\+Data\+Version\+Tag (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_aea78877b0dccde1e587ee1ddeda1c155}
Return a version tag for \hyperlink{structv8_1_1_script_compiler_1_1_cached_data}{Cached\+Data} for the current \hyperlink{classv8_1_1_v8}{V8} version \& flags.

This value is meant only for determining whether a previously generated \hyperlink{structv8_1_1_script_compiler_1_1_cached_data}{Cached\+Data} instance is still valid; the tag has no other meaing.

Background\+: The data carried by \hyperlink{structv8_1_1_script_compiler_1_1_cached_data}{Cached\+Data} may depend on the exact \hyperlink{classv8_1_1_v8}{V8} version number or currently compiler flags. This means when persisting \hyperlink{structv8_1_1_script_compiler_1_1_cached_data}{Cached\+Data}, the embedder must take care to not pass in data from another \hyperlink{classv8_1_1_v8}{V8} version, or the same version with different features enabled.

The easiest way to do so is to clear the embedder\textquotesingle{}s cache on any such change.

Alternatively, this tag can be stored alongside the cached data and compared when it is being used. \hypertarget{classv8_1_1_script_compiler_a4cef8b34c2744f6508a9ce53182c19bf}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Compile@{Compile}}
\index{Compile@{Compile}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Compile}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Local}$<${\bf Script}$>$ v8\+::\+Script\+Compiler\+::\+Compile (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Source} $\ast$}]{source, }
\item[{Compile\+Options}]{options = {\ttfamily kNoCompileOptions}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a4cef8b34c2744f6508a9ce53182c19bf}
Compiles the specified script (bound to current context).


\begin{DoxyParams}{Parameters}
{\em source} & \hyperlink{classv8_1_1_script}{Script} source code. \\
\hline
{\em pre\+\_\+data} & Pre-\/parsing data, as obtained by Script\+Data\+::\+Pre\+Compile() using pre\+\_\+data speeds compilation if it\textquotesingle{}s done multiple times. Owned by caller, no references are kept when this function returns. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Compiled script object, bound to the context that was active when this function was called. When run it will always use this context. 
\end{DoxyReturn}
\hypertarget{classv8_1_1_script_compiler_a45b17bbe1da31c32e3783b91bdde9fcb}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Compile@{Compile}}
\index{Compile@{Compile}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Compile}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Local}$<${\bf Script}$>$ v8\+::\+Script\+Compiler\+::\+Compile (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Streamed\+Source} $\ast$}]{source, }
\item[{{\bf Handle}$<$ {\bf String} $>$}]{full\+\_\+source\+\_\+string, }
\item[{const {\bf Script\+Origin} \&}]{origin}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a45b17bbe1da31c32e3783b91bdde9fcb}
Compiles a streamed script (bound to current context).

This can only be called after the streaming has finished (\hyperlink{classv8_1_1_script_compiler_1_1_script_streaming_task}{Script\+Streaming\+Task} has been run). \hyperlink{classv8_1_1_v8}{V8} doesn\textquotesingle{}t construct the source string during streaming, so the embedder needs to pass the full source here. \hypertarget{classv8_1_1_script_compiler_a0811ba4ae8b6700d44d0d082a4812794}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Compile\+Function\+In\+Context@{Compile\+Function\+In\+Context}}
\index{Compile\+Function\+In\+Context@{Compile\+Function\+In\+Context}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Compile\+Function\+In\+Context}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Local}$<${\bf Function}$>$ v8\+::\+Script\+Compiler\+::\+Compile\+Function\+In\+Context (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Source} $\ast$}]{source, }
\item[{{\bf Local}$<$ {\bf Context} $>$}]{context, }
\item[{size\+\_\+t}]{arguments\+\_\+count, }
\item[{{\bf Local}$<$ {\bf String} $>$}]{arguments\mbox{[}$\,$\mbox{]}, }
\item[{size\+\_\+t}]{context\+\_\+extension\+\_\+count, }
\item[{{\bf Local}$<$ {\bf Object} $>$}]{context\+\_\+extensions\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a0811ba4ae8b6700d44d0d082a4812794}
Compile a function for a given context. This is equivalent to running

with (obj) \{ return function(args) \{ ... \} \}

It is possible to specify multiple context extensions (obj in the above example). \hypertarget{classv8_1_1_script_compiler_a96bafa715e4a9c413824f2ce6c7db434}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Compile\+Module@{Compile\+Module}}
\index{Compile\+Module@{Compile\+Module}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Compile\+Module}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Local}$<${\bf Script}$>$ v8\+::\+Script\+Compiler\+::\+Compile\+Module (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Source} $\ast$}]{source, }
\item[{Compile\+Options}]{options = {\ttfamily kNoCompileOptions}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a96bafa715e4a9c413824f2ce6c7db434}
Compile an E\+S6 module.

This is an experimental feature.

T\+O\+D\+O(adamk)\+: \hyperlink{classv8_1_1_script}{Script} is likely the wrong return value for this; should return some new Module type. \hypertarget{classv8_1_1_script_compiler_a5f590f94e2705d12392c17b7fa097e1d}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Compile\+Unbound@{Compile\+Unbound}}
\index{Compile\+Unbound@{Compile\+Unbound}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Compile\+Unbound}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Local}$<${\bf Unbound\+Script}$>$ v8\+::\+Script\+Compiler\+::\+Compile\+Unbound (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Source} $\ast$}]{source, }
\item[{Compile\+Options}]{options = {\ttfamily kNoCompileOptions}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a5f590f94e2705d12392c17b7fa097e1d}
Compiles the specified script (context-\/independent). Cached data as part of the source object can be optionally produced to be consumed later to speed up compilation of identical source scripts.

Note that when producing cached data, the source must point to N\+U\+L\+L for cached data. When consuming cached data, the cached data must have been produced by the same version of \hyperlink{classv8_1_1_v8}{V8}.


\begin{DoxyParams}{Parameters}
{\em source} & \hyperlink{classv8_1_1_script}{Script} source code. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Compiled script object (context independent; for running it must be bound to a context). 
\end{DoxyReturn}
\hypertarget{classv8_1_1_script_compiler_a406bb44ef02d644d94bccd3f7b04f2d4}{}\index{v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}!Start\+Streaming\+Script@{Start\+Streaming\+Script}}
\index{Start\+Streaming\+Script@{Start\+Streaming\+Script}!v8\+::\+Script\+Compiler@{v8\+::\+Script\+Compiler}}
\subsubsection[{Start\+Streaming\+Script}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Script\+Streaming\+Task}$\ast$ v8\+::\+Script\+Compiler\+::\+Start\+Streaming\+Script (
\begin{DoxyParamCaption}
\item[{{\bf Isolate} $\ast$}]{isolate, }
\item[{{\bf Streamed\+Source} $\ast$}]{source, }
\item[{Compile\+Options}]{options = {\ttfamily kNoCompileOptions}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classv8_1_1_script_compiler_a406bb44ef02d644d94bccd3f7b04f2d4}
Returns a task which streams script data into \hyperlink{classv8_1_1_v8}{V8}, or N\+U\+L\+L if the script cannot be streamed. The user is responsible for running the task on a background thread and deleting it. When ran, the task starts parsing the script, and it will request data from the \hyperlink{classv8_1_1_script_compiler_1_1_streamed_source}{Streamed\+Source} as needed. When Script\+Streaming\+Task\+::\+Run exits, all data has been streamed and the script can be compiled (see Compile below).

This A\+P\+I allows to start the streaming with as little data as possible, and the remaining data (for example, the \hyperlink{classv8_1_1_script_origin}{Script\+Origin}) is passed to Compile. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
deps/v8/include/v8.\+h\end{DoxyCompactItemize}
